/*
 Superscheda
 Copyright (C) 2017-2018  Pietro Saccardi

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/


/* ARRAY-RELATED ---------------------------------------------------------------------------*/

/*Automatically hide all placeholders in the arrays if there is an item
next to them*/
*[data-dd-array="item"] ~ .array-placeholder { display: none!important; }

*[data-dd-array="master"] { display: none!important; }

/*Adds a little bit of spacing on the right of a row. Used for the inline arrays that have a
table-like header: this makes sure that the last label on the right aligns correctly with the
last column on the right (spacing rules for controls and labels are different.)*/
.pr-custom {
  padding-right: 1.25rem;
}

/*An array container is difficult to scroll through in XS and SM sizes, so make it always
striped is marked as such. For normal devices, make it striped only if marked with always
striped.*/
@media (max-width: 767px) {
  .striped, .inner-striped > * {
    border-top: 1px solid #e9ecef;
    padding-left: 0.3rem;
    padding-right: 0.3rem;
  }
  .striped:nth-of-type(odd), .inner-striped:nth-of-type(odd) > * {
    background-color: rgba(0, 0, 0, .05);
  }
  .striped:last-of-type, .striped:last-of-type > * {
    border-bottom: 1px solid #e9ecef;
  }
}

.always-stripe .striped, .always-stripe .inner-striped > * {
  border-top: 1px solid #e9ecef;
  padding-left: 0.3rem;
  padding-right: 0.3rem;
}
.always-stripe .striped:nth-of-type(odd), .always-stripe .inner-striped:nth-of-type(odd) > * {
  background-color: rgba(0, 0, 0, .05);
}
.always-stripe .striped:last-of-type, .always-stripe .inner-striped:last-of-type > * {
  border-bottom: 1px solid #e9ecef;
}

@media (min-width: 768px) {
  /*Also set up a pt class that depends on striping, useful for giving better layout*/
  .always-stripe .pt-1-if-striped {
    padding-top: 0.4rem;
  }
}

/* CUSTOM CHECKBOXES -----------------------------------------------------------------------*/

.dd-custom-check .fa {
  margin-bottom: 0rem;
  padding: 0rem;
}
.dd-custom-check input[type="checkbox"] ~ .fa:before {
  font-weight: 400;
}
.dd-custom-check input[type="checkbox"]:checked ~ .fa:before {
  font-weight: 900;
}

.dd-custom-check input[type="checkbox"] ~ .fa.dd-fa-check:before {
  content: "\f0c8";
}

.dd-custom-check input[type="checkbox"]:checked ~ .fa.dd-fa-check:before {
  content: "\f14a";
}

/* CUSTOM SPELL MAGIC  ---------------------------------------------------------------------*/

.dd-if-spell-ready, .dd-if-spell-known, .dd-if-spell-used {
  display: none;
}
.dd-spell-ready .dd-if-spell-ready, .dd-spell-known .dd-if-spell-known, .dd-spell-used .dd-if-spell-used {
  display: inline-block;
}

.dd-spell-known + .dd-spell-ready::before,
.dd-spell-known + .dd-spell-used::before,
.dd-spell-ready + .dd-spell-used::before,
.dd-spell-known::before {
  display: block;
  margin-top: 1rem !important;
  font-size: 1rem;
  margin-bottom: .5rem;
  font-family: inherit;
  font-weight: 500;
  line-height: 1.2;
  color: inherit;
}
.dd-spell-used select, .dd-spell-used .input-group, .dd-spell-used input {
  opacity: 0.5;
}
.dd-spell-used .input-group input {
  opacity: 1;
}

.dd-spell-known::before {
  content: "Incantesimi conosciuti";
}
.dd-spell-known[data-dd-array="item"] ~ .dd-spell-known::before {
  content: none;
}

.dd-spell-known + .dd-spell-ready::before {
  content: "Incantesimi preparati";
}
.dd-spell-ready + .dd-spell-used::before,
.dd-spell-known + .dd-spell-used::before {
  content: "Incantesimi usati";
}

/* DAT class */
.dd-spell-known[data-dd-array="item"] ~ .dd-spell-known .dd-hide-if-not-first-spell-of-type, .dd-spell-ready[data-dd-array="item"] ~ .dd-spell-ready .dd-hide-if-not-first-spell-of-type, .dd-spell-used[data-dd-array="item"] ~ .dd-spell-used .dd-hide-if-not-first-spell-of-type {
  display: none!important;
}

/* TMP MOD ACTIVATOR -----------------------------------------------------------------------*/

.dd-tmp {
  opacity: 0.5;
}

.dd-tmp-on .dd-tmp {
  opacity: 1.0;
}

/* CUSTOMIZED BUTTONS ----------------------------------------------------------------------*/


.btn-addon:focus, .btn-addon.focus {
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
  border-color: #80bdff;
  border-left-width: 1px;
}
.btn-group .btn-addon:focus, .btn-group .btn-addon.focus {
  z-index: 3;
}
.btn-group .btn-addon + .btn-addon {
  border-left-width: 0px;
  margin-left: 0px;
}
.btn-group .btn-addon:not(:last-child) {
  border-right-width: 0px;
  margin-right: 0px;
}
.btn-addon {
  border-color: #ced4da;
}



.btn-addon {
  color: #495057;
  background-color: #e9ecef;
}

.btn-addon:hover {
  color: #000;
  background-color: #ced4da;
}

.btn-addon:active {
  background-color: #a8b3be;
}



.btn-addon:not(.dd-custom-check).active {
  color: #f3f5f6;
  background-color: #6c757d;
}

.btn-addon:not(.dd-custom-check).active:hover {
  color: #fff;
  background-color: #495057;
}

.btn-addon:not(.dd-custom-check).active:active {
  background-color: #32383c;
}


/* LAYOUT ----------------------------------------------------------------------------------*/

/*Separatable columns have a separator only in sizes >= md*/
@media (min-width: 768px) {
  /* Border on the right only for non-last element */
  .separatable:not(:last-of-type) {
    border-right: 1px solid rgb(233, 236, 239);
  }
}

/*Fix for scrollspy with a sticky top navbar. Lifts the anchor point up by the amount of the
navbar.*/
.hidden-anchor {
  display: block;
  position: relative;
  top: -3.5rem;
  visibility: hidden;
}

/* TOC -------------------------------------------------------------------------------------*/

/*Sticky TOC, but right below the navbar*/
.sticky-toc {
  position: -webkit-sticky!important;
  position: sticky!important;
  top: 4rem;
  max-height: calc(100vh - 4rem);
  padding-left: 0;
}

/*Scrollable wrapper for the big, column-like TOC*/
.toc-wrapper {
  overflow-y: scroll;
  max-height: calc(100vh - 4rem);
}

/*Scrollable wrapper for the dropdown menu*/
.toc-small-wrapper {
  overflow-y: scroll;
  max-height: calc(100vh - 5rem);
}

/*Manually set the padding of the nav links in the TOC (slightly smaller)*/
.nav-toc .nav-link {
  padding: .2rem .5rem;
}


/* MISCELLANEOUS ---------------------------------------------------------------------------*/

/*Tables cannot shrink controls arbitrarily; all inputs must be this size at least*/
.table.table-sm.table-responsive tbody td input[type="text"] {
  min-width: 3rem;
}

#main_nav {
  box-shadow: 0 0.1rem 0.1rem rgba(0, 0, 0, 0.2);
  z-index: 1030; /* above alerts */
}

.btn-dbx-login {
  cursor: default;
}

nav#main_nav .nav-item .btn:not([disabled]) {
  cursor: pointer;
}


input[data-dd-formula]::placeholder {
    color: #17a2b8!important;
}

input[data-dd-formula]:not(.dd-void) {
  border-color: #17a2b8!important;
}

input.dd-void[data-dd-formula]:not([placeholder]) {
  border-color: #dc3545!important;
}

.modal-backdrop.fade:not(.show) {
    opacity: 0;
}
.modal-backdrop.full-opc.show {
    opacity: 1;
}
.modal-backdrop.full-opc {
    background-color: rgba(0, 0, 0, 0.5);
}

.zigzag-top-bottom {
  position: relative;
  padding-top: 1rem;
  padding-bottom: 1rem;
  padding-left: 1rem;
  padding-right: 1rem;
  margin-left: -1rem;
  margin-right: -1rem;
}
.zigzag-top-bottom:before {
  background: linear-gradient(-135deg, #ffffff .5rem, transparent 0), linear-gradient(135deg, #ffffff .5rem, transparent 0);
  background-position: left-top;
  background-repeat: repeat-x;
  background-size: 1rem 1rem;
  content: " ";
  display: block;
  position: absolute;
  top: 0px;
  left: 0px;
  width: 100%;
  height: 1rem;
}
.zigzag-top-bottom:after {
  background: linear-gradient(-45deg, #ffffff .5rem, transparent 0), linear-gradient(45deg, #ffffff .5rem, transparent 0);
  background-position: left-top;
  background-repeat: repeat-x;
  background-size: 1rem 1rem;
  content: " ";
  display: block;
  position: absolute;
  bottom: 0px;
  left: 0px;
  width: 100%;
  height: 1rem;
}

/* FORK ME RIBBON --------------------------------------------------------------------------*/


/*Set the size of the ribbon, on small and big devices.*/
@media (max-width: 767px) {
  .forkme-ribbon .forkme-ribbon-background {
    width: 3.5rem;
    height: 3.5rem;
  }
}

@media (min-width: 768px) {
  .forkme-ribbon .forkme-ribbon-background {
    width: 5.6rem;
    height: 5.6rem;
  }
}

/*Fix the position and the z-index of all the components of the ribbon*/
.forkme-ribbon .forkme-ribbon-background, .forkme-ribbon .forkme-ribbon-text {
  position: fixed;
  bottom: 0;
  right: 0;
  z-index: 10;
}

/*The background is a skewed linear gradient; need to set the right origin.*/
.forkme-ribbon .forkme-ribbon-background {
  background: linear-gradient(90deg, #28a745, #1e7e34);
  transform: skewX(-45deg);
  transform-origin: 0% 100%;
  box-shadow: -0.1rem 0 1rem rgba(0, 0, 0, 0.4);
}

/*The foreground has a top, dashed border, a box and text shadow and is rotated by 45 deg.*/
.forkme-ribbon .forkme-ribbon-text {
  transform: translate(50%, 0%) rotate(-45deg);
  transform-origin: 50% 100%;
  text-align: center;
  border-top-style: dashed;
  border-top-width: thin;
  border-top-color: #f8f9fa;
  padding-right: 10rem;
  padding-left: 10rem;
  padding-top: .15rem;
  padding-bottom: 0.7rem;
  color: #f8f9fa;
  box-shadow: 0 0.1rem 0.2rem 0.1rem rgba(0, 0, 0, 0.5);
  text-shadow: 0.05rem -0.05rem rgba(0, 0, 0, 0.3);
  white-space: nowrap;
  overflow: hidden;
}

/* DROPBOX ---------------------------------------------------------------------------------*/

.dropbox-folder + .dropbox-file {
  margin-top: 0.2rem;
}

.dropbox-file-list {
  overflow-y: scroll;
  max-height: calc(50vh);
}

body.has-dbx .d-none-w-dbx {
  display: none!important;
}

body:not(.has-dbx) .d-none-wo-dbx {
  display: none!important;
}
